<?php
    $modules = getModuleContent();
    $content = "";
    if ($modules) {
        foreach ($modules as $module) {
            $html = "";

            $moduleHeader = $module["header"];
            $moduleLength = count($module["category"]) + count($module["nocategory"]);

            if ($moduleLength > 0) {
                $html .= '<li class="header">'.$moduleHeader.'</li>';
                $moduleCategory   = $module["category"];
                $moduleNoCategory = $module["nocategory"];
                
                
                if (count($moduleCategory) > 0) {
                    foreach ($moduleCategory as $category) {
                        $icon = $category["icon"];
                        $moduleLength = count($category["modules"]);

                        if ($moduleLength > 0) {
                            $html .= '
                            <li class="">
                                <a href="javascript:void(0);" class="menu-toggle">
                                    <img src="'.base_url("assets/upload-files/icons/$icon").'" height="25" width="25">
                                    <span class="ml-1">'.$category["categoryName"].'</span>
                                </a>';

                            if ($moduleLength > 12) {
                            $html .= '
                            <ul class="ml-menu mega_menu">
                                <div class="row">';
                                foreach ($category["modules"] as $item) {
                                    $html .= '
                                    <div class="col-xl-3 col-md-4 col-sm-12">
                                    <li class="w-100">
                                        <a href="'.base_url().strtolower($item["controller"]).'">'.$item["name"].'</a>
                                    </li>
                                    </div>';
                                }
                                $html .= '</div>';
                            } else {
                                $html .= '
                                <ul class="ml-menu">';
                                foreach ($category["modules"] as $item) {
                                    $html .= '
                                    <li class="w-100">
                                        <a href="'.base_url().strtolower($item["controller"]).'">'.$item["name"].'</a>
                                    </li>';
                                }
                            }

                            $html .= '
                                </ul>
                            </li>';
                        }
                        
                    }
                }

                if (count($moduleNoCategory) > 0) {
                    foreach ($moduleNoCategory as $category) {
                        $icon = $category["icon"];
                        $html .= '
                        <li class="">
                            <a href="'.strtolower($category["controller"]).'">
                                <img src="'.base_url("assets/upload-files/icons/$icon").'" height="25" width="25">
                                '.$category["name"].'
                            </a>
                        </li>';
                    }
                }

            }

            $content .= $html;
        }
    }
    echo $content;
?>                            


                            <!-- ----- TEMPORARY MENU ----- -->
                            <!-- <li class="header"></li>
                            <li>
                                <a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-home"></i><span>Temporary Menu</span></a>
                                <ul class="ml-menu">
                                    <li><a href="<?= base_url('approval_setup') ?>">Approval Setup</a></li>
                                    <li><a href="<?= base_url('roles_permission') ?>">Roles and Permission</a></li>
                                    <li><a href="<?= base_url('system_notification') ?>">System Notification</a></li>
                                    <li><a href="<?= base_url('fms/bank') ?>">Bank</a></li>
                                    <li><a href="<?= base_url('ims/inventory_category') ?>">Inventory Category</a></li>
                                    <li><a href="<?= base_url('ims/inventory_conditions_masterfile') ?>">Inventory Condition Masterfile </a></li>
                                    <li><a href="<?= base_url('ims/inventory_item') ?>">Inventory Item</a></li>
                                    <li><a href="<?= base_url('ims/inventory_vendor_masterfile') ?>">Inventory Vendor</a></li>
                                    <li><a href="<?= base_url('hris/schedule_setup') ?>">Schedule Setup</a></li>
                                    <li><a href="<?= base_url('hris/leaves') ?>">Leave Request</a></li>
                                </ul>
                            </li> -->
                            <!-- ----- END TEMPORARY MENU ----- -->


                        </ul>
                    </div>
                </div>
            </div>
        </div>